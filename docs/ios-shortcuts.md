# iOS 快捷指令配置指南

## 豆包图片上传快捷指令

这个快捷指令可以让你快速将拍摄的豆包照片上传到我们的服务器。

### 快捷指令下载链接

**方式一：手动创建**
1. 打开 iPhone 上的"快捷指令"应用
2. 点击右上角的"+"创建新快捷指令
3. 按照下面的步骤配置

**方式二：导入配置**
```
快捷指令名称：上传豆包照片
```

### 详细配置步骤

#### 1. 基础设置
- **快捷指令名称**：`上传豆包照片` 或 `Upload Doubao Photo`
- **图标**：选择相机或猫咪图标
- **颜色**：选择你喜欢的颜色（建议橙色或蓝色）

#### 2. 添加操作步骤

**步骤 1：选择照片**
1. 搜索并添加"选择照片"操作
2. 设置：
   - 选择：单张照片
   - 包含实况照片：关闭（可选）

**步骤 2：获取网络内容**
1. 搜索并添加"获取网络内容"操作
2. 配置如下：
   ```
   URL: https://your-app-domain.vercel.app/api/upload
   方法: POST
   请求体: 表单
   ```

**步骤 3：配置表单数据**
在"获取网络内容"中添加表单字段：
- **字段名**：`image`
- **值**：选择"照片"（从前一步获取）
- **类型**：文件

**步骤 4：添加请求头（可选）**
```
Content-Type: multipart/form-data
User-Agent: iOS-Shortcuts/豆包上传器
```

**步骤 5：处理响应**
1. 添加"获取字典值"操作
2. 获取字典：选择"网络内容"
3. 获取值：`success`

**步骤 6：显示结果**
1. 添加"如果"条件操作
2. 条件：如果 `字典值` 等于 `true`
   - **成功时**：添加"显示通知"
     - 标题：`豆包照片上传成功！🐱`
     - 内容：获取 `message` 字段
   - **失败时**：添加"显示通知"
     - 标题：`上传失败`
     - 内容：获取 `error` 字段

### 高级配置（可选）

#### 添加地理位置信息
如果你想记录拍照地点：
1. 在"选择照片"后添加"获取当前位置"
2. 在表单中添加额外字段：
   - `latitude`: 纬度
   - `longitude`: 经度

#### 添加自定义标签
在表单中添加：
- `tags`: `豆包,可爱,今日份猫咪`

### 完整的快捷指令流程

```
1. 选择照片 📸
   ↓
2. 获取当前位置 📍 (可选)
   ↓
3. 获取网络内容 🌐
   - URL: https://your-domain.vercel.app/api/upload
   - 方法: POST
   - 表单字段: image=照片
   ↓
4. 获取字典值 📋
   - 键: success
   ↓
5. 条件判断 ❓
   - 成功 → 显示成功通知 ✅
   - 失败 → 显示错误信息 ❌
```

### 测试快捷指令

1. **保存快捷指令**后，点击播放按钮测试
2. 选择一张豆包的照片
3. 等待上传完成
4. 查看通知结果

### 故障排除

#### 常见问题

**问题 1：上传失败，提示网络错误**
- 检查网络连接
- 确认 URL 地址正确
- 检查 Vercel 应用是否已部署

**问题 2：提示文件太大**
- 图片大小超过 50MB 限制
- 一般情况下不会遇到此问题，如需要可以在快捷指令中添加"调整图像大小"操作

**问题 3：提示格式不支持**
- 确保是 JPEG、PNG 或 WEBP 格式
- Live Photos 需要转换为静态图片

#### 优化建议

**添加图片压缩：**
1. 在"选择照片"后添加"调整图像大小"
2. 设置：
   - 宽度：1920 像素（或更小）
   - 保持纵横比：开启

**批量上传：**
1. 修改"选择照片"为"选择多张照片"
2. 添加"重复执行"操作
3. 为每张照片执行上传流程

### 隐私说明

- 照片直接上传到你的私人 Vercel 服务器
- 我们不会访问或存储你的个人信息
- 地理位置信息是可选的
- 所有数据仅用于个人豆包照片管理

### 高级用法

#### 语音触发
1. 在快捷指令中设置"嘿 Siri"短语
2. 建议短语：
   - "上传豆包照片"
   - "保存猫咪照片" 
   - "豆包存档"

#### 小组件快速访问
1. 长按主屏幕添加快捷指令小组件
2. 选择这个上传快捷指令
3. 一键快速上传

#### 自动化触发
可以设置自动化规则：
- 在特定位置拍照时自动上传
- 连接特定 WiFi 时提醒上传
- 每天定时提醒整理豆包照片

---

**需要帮助？** 
- 检查 API 响应：在快捷指令最后添加"快速查看"查看完整响应
- 查看服务器日志：访问 `/api/stats` 检查服务状态
- 联系开发者：通过 GitHub Issues 反馈问题